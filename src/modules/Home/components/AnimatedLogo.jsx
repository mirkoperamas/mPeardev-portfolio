import anime from "animejs/lib/anime.es.js";
import { useEffect } from "react";
import { motion } from "framer-motion";

export function Animatedlogo() {
  function randomValues() {
    let timeline = anime.timeline({
      duration: function () {
        return anime.random(0, 270);
      },
      delay: [45, 250],
      direction: "alternate",
      easing: "easeInOutQuint",
      autoplay: true,
      loop: true,
    });
    timeline.add({
      targets: ["feDisplacementMap"],
      scale: [5, 30],
    });
    timeline.add({
      targets: ["#svg_main"],
      fill: ["#004040", "#00c040", "#008080"],
      scale: [0.9, 1],
      complete: randomValues,
    });
  }

  useEffect(() => {
    anime({
      targets: ["#element"],
      strokeDashoffset: [anime.setDashoffset, 0],
      points: [
        {
          value: [
            "88.5,80.45313l272.5,79.54688l-231,189l-41.5,-268.54688z",
            "207.5,185.45313l156.5,-26.45313l,190l-44.5,-268.54687z",
          ],
        },
      ],
      stroke: ["#80ff00", "#80ff80", "#80c000", "#00ff40"],
      easing: "easeOutQuad",
      delay: 1000,
      duration: 2000,
      autoplay: true,
      loop: true,
    });
    randomValues();
  }, []);

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{
        delay: 1.5,
        duration: 3,
      }}
    >
      <svg width="400" height="400" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter
            id="filter-broken"
            filterUnits="objectBoundingBox"
            x="0"
            y="0"
            width="100%"
            height="100%"
            colorInterpolationFilters="sRGB"
          >
            <feImage
              preserveAspectRatio="xMidYMid meet"
              xlinkHref="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Crect width='70%25' height='70%25' fill='white'/%3E%3Ccircle cx='50%25' cy='50%25' r='500' %0Afill='none' stroke='black' stroke-width='100' stroke-dasharray='10'/%3E%3C/svg%3E"
              result="lense"
            />
            <feDisplacementMap
              scale="10"
              xChannelSelector="B"
              yChannelSelector="G"
              in2="lense"
              in="SourceGraphic"
              result="glass-effect"
            />
            <feMerge>
              <feMergeNode in="SourceGraphic" />
              <feMergeNode in="glass-effect" />
            </feMerge>
          </filter>
        </defs>

        <g id="svg_main">
          <path
            id="element"
            fill="null"
            d="M 299.054688 144.90625 C 299.054688 142.683594 298.878906 140.445312 299.089844 138.234375 C 299.527344 133.582031 299.929688 128.902344 300.816406 124.316406 C 301.574219 120.402344 304.902344 118.367188 308.300781 117.214844 C 312.960938 115.640625 316.277344 118.378906 317.0625 123.679688 C 317.738281 128.238281 318.617188 132.761719 319.285156 137.320312 C 319.695312 140.078125 319.917969 142.878906 320.171875 145.65625 C 320.453125 148.6875 320.644531 151.730469 320.941406 154.753906 C 321.097656 156.324219 323.671875 158.554688 325.246094 158.488281 C 328.429688 158.363281 331.605469 158.105469 334.792969 158.011719 C 336.8125 157.957031 338.84375 158.03125 340.863281 158.1875 C 344.75 158.484375 348.648438 158.742188 352.507812 159.269531 C 356.625 159.835938 360.523438 160.941406 361.992188 165.601562 C 362.203125 166.269531 362.714844 166.84375 362.984375 167.507812 C 364.3125 170.710938 363.371094 173.84375 360.160156 175.125 C 357.433594 176.210938 354.4375 176.675781 351.527344 177.21875 C 348.519531 177.785156 345.476562 178.121094 342.445312 178.535156 C 339.933594 178.878906 337.425781 179.246094 334.90625 179.496094 C 331.601562 179.820312 328.292969 180.046875 324.984375 180.324219 C 323.765625 180.425781 321.683594 183.214844 321.738281 184.898438 C 321.820312 187.375 322.238281 189.855469 322.179688 192.324219 C 322.039062 198.460938 321.808594 204.597656 321.414062 210.71875 C 321.050781 216.371094 315.648438 222.046875 310.335938 223.34375 C 307.488281 224.039062 302.3125 221.855469 302.109375 217.960938 C 301.972656 215.4375 301.59375 212.929688 301.425781 210.402344 C 301.097656 205.53125 300.847656 200.652344 300.554688 195.785156 C 300.339844 192.214844 300.078125 188.652344 299.878906 185.074219 C 299.769531 183.121094 297.878906 181.101562 295.9375 181.160156 C 289.078125 181.363281 282.222656 181.726562 275.363281 181.839844 C 269.605469 181.929688 264.339844 180.257812 260.328125 175.976562 C 257.503906 172.964844 255.9375 169.296875 257.53125 165.074219 C 258.285156 163.078125 259.785156 161.671875 262.058594 161.523438 C 272.542969 160.832031 283.03125 160.148438 293.519531 159.535156 C 296.980469 159.328125 299.070312 157.230469 299.042969 153.742188 C 299.023438 150.796875 299.039062 147.855469 299.039062 144.902344 C 299.042969 144.90625 299.046875 144.90625 299.054688 144.90625 Z M 299.054688 144.90625 "
            fillOpacity="0.2"
            fillRule="nonzero"
          />
          <path
            id="element"
            fill="null"
            d="M 236.734375 74.097656 C 236.734375 74.097656 253.453125 80.699219 256.546875 110.492188 C 259.640625 140.285156 247.027344 154.589844 250.644531 172.933594 C 254.257812 191.277344 263.515625 218.574219 256.871094 239.890625 C 250.226562 261.207031 232.367188 277.300781 197.976562 278.820312 C 163.585938 280.34375 107.675781 268.5625 89.566406 211.164062 C 71.460938 153.765625 133.738281 124.378906 133.738281 124.378906 C 133.738281 124.378906 155.957031 111.496094 163.015625 100.921875 C 170.078125 90.347656 205.335938 50.480469 223.113281 64.457031 C 223.113281 64.457031 229.507812 48.355469 238.808594 38.210938 C 248.109375 28.070312 256.789062 19.257812 261.714844 17.867188 C 266.636719 16.480469 274.464844 22.078125 270 29.089844 C 265.535156 36.113281 246.859375 41.664062 236.734375 74.097656 Z M 236.734375 74.097656 "
            fillOpacity="0.2"
            fillRule="nonzero"
          />
        </g>
      </svg>
    </motion.div>
  );
}
